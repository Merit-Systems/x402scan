# Claude Agent SDK with x402scan MCP server
# Provides access to x402-protected APIs with automatic payment handling

# - id: anthropic:claude-agent-sdk
#   label: 'x402scan MCP + WebTools - Haiku 4.5'
#   config:
#     model: claude-haiku-4-5-20251001
#     mcp:
#       servers:
#         - command: npx
#           args: ['-y', '@x402scan/mcp@latest']
#           name: x402
#     include_partial_messages: true
#     max_budget_usd: 1.00
#     output_format:
#       type: json_schema
#       schema:
#         type: object
#         properties:
#           answer:
#             description: 'The answer to the question'
#           sources:
#             type: array
#             items:
#               type: string
#             description: 'URLs or references used'
#           tool_call_log:
#             type: array
#             items:
#               type: object
#               properties:
#                 tool:
#                   type: string
#                 input:
#                   type: object
#                 success:
#                   type: boolean
#             description: 'Log of tool calls made'
#         required: [answer]
#     append_allowed_tools:
# - 'mcp__x402__fetch'
# - 'mcp__x402__fetch_with_auth'
# - 'mcp__x402__get_wallet_info'
# - 'mcp__x402__check_endpoint_schema'
# - 'mcp__x402__discover_api_endpoints'
# - 'mcp__x402__redeem_invite'
# - 'mcp__x402__report_error'
#       - 'WebFetch'
#       - 'WebSearch'

- id: anthropic:claude-agent-sdk
  label: 'x402scan MCP + WebTools - Sonnet 4.5'
  config:
    model: claude-sonnet-4-5-20250929
    setting_sources: ['local']
    permission_mode: bypassPermissions
    allow_dangerously_skip_permissions: true
    allow_all_tools: true
    mcp:
      servers:
        - command: sh
          args: ['-c', 'node ${MCP_SERVER_DIR}/index.js']
          name: x402
    include_partial_messages: true
    max_budget_usd: 1.50
    output_format:
      type: json_schema
      schema:
        type: object
        properties:
          answer:
            description: 'The answer to the question'
          sources:
            type: array
            items:
              type: string
            description: 'URLs or references used'
          tool_call_log:
            type: array
            items:
              type: object
              properties:
                tool:
                  type: string
                input:
                  type: object
                success:
                  type: boolean
            description: 'Log of tool calls made'
        required: [answer, tool_call_log]

- id: anthropic:claude-agent-sdk
  label: 'x402scan MCP + WebTools - Opus 4.5'
  config:
    model: claude-opus-4-5-20251101
    setting_sources: ['local']
    permission_mode: bypassPermissions
    allow_dangerously_skip_permissions: true
    allow_all_tools: true
    mcp:
      servers:
        - command: sh
          args: ['-c', 'node ${MCP_SERVER_DIR}/index.js']
          name: x402
    include_partial_messages: true
    max_budget_usd: 5.00
    output_format:
      type: json_schema
      schema:
        type: object
        properties:
          answer:
            description: 'The answer to the question'
          sources:
            type: array
            items:
              type: string
            description: 'URLs or references used'
          tool_call_log:
            type: array
            items:
              type: object
              properties:
                tool:
                  type: string
                input:
                  type: object
                success:
                  type: boolean
            description: 'Log of tool calls made'
        required: [answer, tool_call_log]
